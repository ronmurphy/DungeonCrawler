# Sprite Sheet Editor Integration Guide

## ðŸš¨ TO DO: Restore Sprite Sheet Editor v2

The **SpriteSheetEditor-v2.js** was accidentally overwritten during a rollback but needs to be restored and properly integrated as a **self-contained tool** for creating sprite sheet JSON files.

## Overview

The Sprite Sheet Editor v2 was a professional, tablet-optimized tool designed specifically for artist Michelle to create sprite sheet configuration files in the correct format for the DCC map system.

### Key Features (that need to be restored):
- âœ… **Tablet-first responsive design** - Optimized for touch interfaces
- âœ… **4 themed color palettes** - Professional color schemes for different environments
- âœ… **Individual PNG cell loading** - Drag & drop PNG files into specific grid cells
- âœ… **Auto-color detection** - Automatically detects dominant colors from uploaded images
- âœ… **Live preview** - Real-time preview of sprite positioning and colors
- âœ… **Professional UI** - Clean, intuitive interface for non-technical users
- âœ… **Export functionality** - Generates JSON files in the exact format needed

## Required JSON Format

The sprite sheet editor MUST generate JSON files matching this exact structure (see `default.json`):

```json
{
  "name": "Tileset Name",
  "description": "Description of the tileset",
  "spriteSize": 64,
  "gridSize": "4x4",
  "backgroundColors": {
    "sprite_id": "#HEX_COLOR",
    "mountain": "#8B7355",
    "water": "#4A90E2"
  },
  "sprites": [
    {
      "id": "sprite_id",
      "name": "Display Name", 
      "category": "terrain|buildings|items|monsters|hazards|paths|features",
      "position": [x, y]
    }
  ]
}
```

### Critical Requirements:
1. **spriteSize**: Must be 64 pixels
2. **gridSize**: Support "4x4", "8x8", etc. formats  
3. **backgroundColors**: Object with sprite_id keys and hex color values
4. **sprites.position**: Array format [x, y] where x,y are 0-based grid coordinates
5. **sprites.category**: Must use predefined categories for consistency

## Integration Guidelines

### ðŸ”’ SELF-CONTAINED TOOL ONLY
The Sprite Sheet Editor should be:
- **Standalone functionality** - Does NOT modify other codebase files
- **JSON generation only** - Only creates/exports JSON configuration files
- **No Canvas integration** - Does not touch PlayerMapViewer or rendering code
- **Asset folder only** - Saves output to `/assets/` directory

### File Structure
```
StoryTeller/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ SpriteSheetEditor-v2.html     # Main editor interface
â”‚   â”œâ”€â”€ SpriteSheetEditor-v2.js       # Editor logic
â”‚   â”œâ”€â”€ SpriteSheetEditor-v2.css      # Tablet-optimized styles
â”‚   â”œâ”€â”€ default.json                  # Reference format
â”‚   â”œâ”€â”€ Gothic.json                   # Example custom tileset
â”‚   â””â”€â”€ Spritesheet_README.md         # This documentation
```

## Technical Specifications

### Grid Support
- **4x4 grids** (16 sprites) - Primary use case
- **8x8 grids** (64 sprites) - Extended tilesets
- **Custom grids** - Configurable dimensions

### Color Palette Themes
1. **Professional** - Clean blues and grays
2. **Earth** - Natural browns and greens  
3. **Ocean** - Blues and aquas
4. **Sunset** - Warm oranges and purples

### Image Processing
- **PNG upload support** - Drag & drop individual PNG files
- **Auto-color detection** - Extract dominant colors using canvas analysis
- **Preview generation** - Real-time grid layout with uploaded images
- **Size validation** - Ensure uploaded images fit sprite dimensions

## Canvas Viewer Compatibility

The JSON files generated by this editor are consumed by:
- `PlayerMapViewer.js` (networked maps via Supabase)
- `PlayerMapViewerLocal.js` (local IndexedDB maps)

### Recent Fix Applied âœ…
Both Canvas viewers now properly respect user naming conventions:
- **Case-sensitive file loading** - "Gothic.json" loads correctly (not "gothic.json")
- **No .toLowerCase() forcing** - Maintains original tileset names
- **Consistent behavior** - Local and networked viewers work identically

## Restoration Steps

1. **Locate SpriteSheetEditor-v2 files** - Check if they exist in assets or backup
2. **Restore as standalone tool** - Place in `/assets/` directory
3. **Test JSON generation** - Verify output matches `default.json` format
4. **Validate Canvas compatibility** - Test generated JSON with both viewers
5. **Document usage** - Create user guide for Michelle

## Usage Workflow

1. **Open SpriteSheetEditor-v2.html** in browser
2. **Configure grid** - Set dimensions (4x4, 8x8, etc.)
3. **Upload sprite images** - Drag PNG files to grid cells
4. **Auto-generate colors** - Let system detect dominant colors
5. **Manual color adjustment** - Fine-tune background colors if needed
6. **Set sprite metadata** - Name, category, description
7. **Export JSON** - Download formatted configuration file
8. **Test in Canvas viewer** - Verify rendering works correctly

## Important Notes

- **Michelle-optimized** - Designed for artist workflow, not programmer
- **Touch-friendly** - Large buttons, drag & drop, tablet interface
- **Professional output** - Generates production-ready JSON files
- **No code modification** - Tool should never edit existing codebase
- **Version compatibility** - Must work with current Canvas viewer fixes

## Integration Priority: HIGH
This tool is essential for content creation workflow and should be restored immediately after Canvas viewer fixes are complete.
